{% extends 'layout.jinja2' %}

{% block subtitle %} Activity Log {% endblock subtitle %}

{% block content %}
<p>{{ content|safe }}</p>

{% if activities is not none %}
<ul>
{% for item in activities %}

    {% if item.type == 'tip' %}
        <li>[{{item.created_at}}] Created tip for <a href="{{ request.route_url('view_paper', arxiv_id=item.paper.arxiv_id) }}">{{ item.paper.title }}</a>.</li>
    {% elif item.type == 'tag' %}
        <li>[{{item.created_at}}] Added tag <a href="{{request.route_url('view_user_taglist', user_name=item.tag.creator.name, tag_name=item.tag.name)}}">{{ item.tag.name }}</a> for <a href="{{ request.route_url('view_paper', arxiv_id=item.paper.arxiv_id) }}">{{ item.paper.title }}</a>.</li>
    {% elif item.type == 'user_paper_rating' %}
        {% if request.user == item.user_paper_rating.creator %}
            <li>[{{item.created_at}}] Gave a <a href="{{request.route_url('view_user_paper_ratings', user_name=item.user_paper_rating.creator.name)}}">{{ item.user_paper_rating.rating }} rating</a> to <a href="{{ request.route_url('view_paper', arxiv_id=item.paper.arxiv_id) }}">{{ item.paper.title }}</a>.</li>
        {% else %}
            <li>[{{item.created_at}}] Gave a <a href="{{request.route_url('view_user_paper_ratings', user_name=item.user_paper_rating.creator.name)}}">rating</a> to <a href="{{ request.route_url('view_paper', arxiv_id=item.paper.arxiv_id) }}">{{ item.paper.title }}</a>.</li>
        {% endif %}
    {% else %}
        <li>[{{item.created_at}}] Unknown activity for <a href="{{ request.route_url('view_paper', arxiv_id=item.paper.arxiv_id) }}">{{ item.paper.title }}</a>.</li>
    {% endif %}

{% endfor %}
<ul>
{% endif %}

{% endblock content %}
