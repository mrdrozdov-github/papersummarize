{% extends 'layout.jinja2' %}

{% block subtitle %}Summarize - {% endblock subtitle %}

{% block content %}
<p>{{ content|safe }}</p>
<p>
    <h3><a href="{{request.route_url('view_paper', arxiv_id=paper.arxiv_id)}}">{{paper.arxiv_id}}</a></h3>
</p>
<p>
    Summary Count: <strong>{{ num_summaries }}</strong> {% if has_wrote %}
            (<a href="{{ request.route_url('view_summary', arxiv_id=paper.arxiv_id, user_name=request.user.name) }}">View your summary.</a>)
            {% else %}
            (<a href="{{ request.route_url('add_summary', arxiv_id=paper.arxiv_id) }}">Add a new summary.</a>)
    {% endif %}
</p>
<p>
Tip Count: <strong>{{ num_tips }}</strong> (<a href="{{ request.route_url('add_tip', arxiv_id=paper.arxiv_id) }}">Add a new tip.</a>)
</p>

{% if summaries is none %}
<p></p>
{% else %}
<div>
<p>Summaries:</p>
<ul>
{% for summary in summaries %}
    <li>
    <div>
    <p>{{ summary.data }}</p>
    <p>by <a href="{{ request.route_url('view_user', user_name=summary.creator.name) }}">{{ summary.creator.name }}</a> on <a href="{{ request.route_url('view_summary', arxiv_id=paper.arxiv_id, user_name=summary.creator.name) }}">{{ summary.created_at_formatted }}</a></p>
    </div>
    </li>
{% endfor %}
</ul>
</div>
{% endif %}

{% if tips is none %}
<p></p>
{% else %}
<div>
<p>Tips:</p>
<ul>
{% for tip in tips %}
    <li>
    <div>
    <p>{{ tip.data }}</p>
    <p>by <a href="{{ request.route_url('view_user', user_name=tip.creator.name) }}">{{ tip.creator.name }}</a> on <a href="{{ request.route_url('view_tip', arxiv_id=paper.arxiv_id, tip_id=tip.id) }}">{{ tip.created_at_formatted }}</a></p>
    </div>
    </li>
{% endfor %}
</ul>
</div>
{% endif %}

{% endblock content %}
