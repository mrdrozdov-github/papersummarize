{% extends 'layout.jinja2' %}

{% block subtitle %}Summarize - {% endblock subtitle %}

{% block content %}
<p>{{ content|safe }}</p>
<div id="paper-info">
    <h3><a href="{{request.route_url('view_paper', arxiv_id=paper_object.arxiv_id)}}">{{paper_object.title}}</a></h3>
    <p>
{% for author in paper_object.authors %}
    {{ author.name }}{% if loop.last %}.{% else %}, {% endif %}
{% endfor %}
    </p>
    <p>published at {{paper_object.published}}</p>
    <p>
    {{ paper_object.abstract }}
    </p>
</div>
{% if request.user %}
<div id="paper-tags">
    <p>Tags: (<a href="{{ request.route_url('add_tag', arxiv_id=paper.arxiv_id) }}">Add a new tag.</a>)</p>
    <ul>
    {% for tag in tags %}
        <li>
        <span><a href="{{request.route_url('view_user_taglist', user_name=request.user.name, tag_name=tag.name)}}">{{ tag.name }}</a></span> 
        <span><a href="{{request.route_url('delete_tag', arxiv_id=paper_object.arxiv_id, tag_name=tag.name)}}">x</a></span>
        </li>
    {% endfor %}
    </ul>
</div>
{% endif %}

<div id="paper-rating-info">
    <p>
        <span>Total Score:</span>
        <span><strong>{{ total_rating }}</strong> (from {{ num_ratings }} ratings)</span>
    </p>

    {% if has_rated_paper %}
    <p>
        <span>Your Rating:</span>
        <span><strong>{{ your_paper_rating.rating }}</strong></span>
        <span><a href="{{request.route_url('delete_paper_rating', arxiv_id=paper_object.arxiv_id) }}">x</a></span>
    </p>
    {% else %}
    <p>
        <span>Add Rating:</span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=1) }}">1</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=2) }}">2</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=3) }}">3</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=4) }}">4</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=5) }}">5</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=6) }}">6</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=7) }}">7</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=8) }}">8</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=9) }}">9</a></span>
        <span><a href="{{ request.route_url('add_paper_rating', arxiv_id=paper_object.arxiv_id, rating=10) }}">10</a></span>
    </p>  
    {% endif %}
</div>

<div id="paper-similar">
<p>
Similar Papers:
</p>
<ul>
{% for paper_object in similar_papers %}
    <li><a href="{{request.route_url('view_paper', arxiv_id=paper_object.arxiv_id)}}">{{ paper_object.title }}</a></li>
{% endfor %}
</ul>
</div>

{% endblock content %}
